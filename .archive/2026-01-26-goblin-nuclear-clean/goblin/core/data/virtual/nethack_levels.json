{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "title": "NetHack Virtual Dungeon Mapping",
  "description": "Dungeon of Doom and special levels mapped to uDOS grid system (Layers 400-455)",
  "version": "1.0.0",
  "last_updated": "2026-01-04",
  "source": "https://github.com/NetHack/NetHack",

  "dungeon_system": {
    "layer_range": "400-455",
    "grid_dimensions": {"columns": 480, "rows": 270},
    "cell_count": 129600,
    "coordinate_format": "VIRTUAL-NETH-L[LAYER][COL][ROW]",
    "example": "VIRTUAL-NETH-L401BC45"
  },

  "main_dungeon": {
    "name": "Dungeon of Doom",
    "layers": "401-450",
    "depth_levels": 50,
    "description": "Primary dungeon from surface entrance to Wizard of Yendor",
    
    "levels": [
      {
        "layer": 401,
        "depth": 1,
        "name": "Dungeon Level 1",
        "tile_code": "VIRTUAL-NETH-L401",
        "difficulty": 1,
        "features": ["entrance", "upstairs", "downstairs", "fountain"],
        "monsters": ["grid bug", "newt", "lichen", "goblin"],
        "description": "Entry level. Safe starting area with basic monsters.",
        "special_rooms": ["treasure_zoo"],
        "avg_items": 8
      },
      {
        "layer": 402,
        "depth": 2,
        "name": "Dungeon Level 2",
        "tile_code": "VIRTUAL-NETH-L402",
        "difficulty": 2,
        "features": ["shop", "altar"],
        "monsters": ["hobbit", "dwarf", "orc"],
        "special_rooms": ["shop", "temple"],
        "avg_items": 10
      },
      {
        "layer": 405,
        "depth": 5,
        "name": "Oracle Level",
        "tile_code": "VIRTUAL-NETH-L405",
        "difficulty": 5,
        "features": ["oracle", "fountain"],
        "monsters": ["soldier", "watchman"],
        "special": "Oracle provides guidance for 50-100 gold",
        "avg_items": 12
      },
      {
        "layer": 410,
        "depth": 10,
        "name": "Big Room",
        "tile_code": "VIRTUAL-NETH-L410",
        "difficulty": 10,
        "features": ["large_room"],
        "monsters": ["troll", "minotaur", "centaur"],
        "description": "Massive open chamber, high monster density",
        "avg_items": 20
      },
      {
        "layer": 420,
        "depth": 20,
        "name": "Castle Entrance",
        "tile_code": "VIRTUAL-NETH-L420",
        "difficulty": 20,
        "features": ["drawbridge", "moat"],
        "monsters": ["soldier", "sergeant", "lieutenant"],
        "description": "Guarded entrance to Castle stronghold",
        "avg_items": 15
      },
      {
        "layer": 425,
        "depth": 25,
        "name": "Medusa's Island",
        "tile_code": "VIRTUAL-NETH-L425",
        "difficulty": 25,
        "features": ["island", "water", "statue_traps"],
        "monsters": ["Medusa"],
        "boss": {
          "name": "Medusa",
          "hp": 100,
          "attacks": ["gaze_petrification", "bite", "weapon"],
          "strategy": "Use mirror or blindness to avoid gaze"
        },
        "treasure": ["wand_of_wishing_possible"],
        "avg_items": 25
      },
      {
        "layer": 430,
        "depth": 30,
        "name": "Castle Interior",
        "tile_code": "VIRTUAL-NETH-L430",
        "difficulty": 30,
        "features": ["throne", "wand_of_wishing"],
        "monsters": ["dragon", "giant", "vampire"],
        "treasure": ["guaranteed_wand_of_wishing"],
        "avg_items": 30
      },
      {
        "layer": 440,
        "depth": 40,
        "name": "Valley of the Dead",
        "tile_code": "VIRTUAL-NETH-L440",
        "difficulty": 40,
        "features": ["graveyard", "temple"],
        "monsters": ["lich", "wraith", "vampire_lord"],
        "description": "Massive graveyard, undead hordes",
        "avg_items": 20
      },
      {
        "layer": 445,
        "depth": 45,
        "name": "Wizard's Tower Approach",
        "tile_code": "VIRTUAL-NETH-L445",
        "difficulty": 45,
        "features": ["portal", "magic_traps"],
        "monsters": ["arch-lich", "master_lich"],
        "avg_items": 18
      },
      {
        "layer": 450,
        "depth": 50,
        "name": "Wizard's Tower",
        "tile_code": "VIRTUAL-NETH-L450",
        "difficulty": 50,
        "features": ["portal_to_elemental_planes"],
        "boss": {
          "name": "Wizard of Yendor",
          "hp": 150,
          "attacks": ["magic_missile", "finger_of_death", "polymorph"],
          "respawns": true,
          "drops": ["Book of the Dead"]
        },
        "objective": "Obtain Book of the Dead",
        "avg_items": 10
      }
    ]
  },

  "gnomish_mines": {
    "name": "Gnomish Mines",
    "layer": 451,
    "sub_levels": "451-01 to 451-12",
    "depth_range": "2-4 from main dungeon",
    "description": "Side branch with gnomes, dwarves, and mineral wealth",
    
    "levels": [
      {
        "sub_layer": "451-01",
        "depth": 1,
        "name": "Mine Entrance",
        "features": ["mine_shaft"],
        "monsters": ["gnome", "dwarf"],
        "avg_items": 12
      },
      {
        "sub_layer": "451-06",
        "depth": 6,
        "name": "Minetown",
        "features": ["shops", "temple", "watch"],
        "monsters": ["gnome_king", "dwarf_lord", "watchman"],
        "special": "Major trading hub with 2-3 shops",
        "avg_items": 25
      },
      {
        "sub_layer": "451-12",
        "depth": 12,
        "name": "Mine's End",
        "features": ["luckstone"],
        "treasure": ["guaranteed_luckstone"],
        "avg_items": 15
      }
    ]
  },

  "sokoban": {
    "name": "Sokoban Puzzle Levels",
    "layer": 452,
    "sub_levels": "452-01 to 452-04",
    "depth_range": "6-10 from main dungeon",
    "description": "Boulder-pushing puzzle branch",
    
    "levels": [
      {
        "sub_layer": "452-01",
        "depth": 1,
        "name": "Sokoban Level 1",
        "puzzle_difficulty": "easy",
        "features": ["boulders", "pits", "holes"],
        "reward_progress": "25%"
      },
      {
        "sub_layer": "452-02",
        "depth": 2,
        "name": "Sokoban Level 2",
        "puzzle_difficulty": "medium",
        "reward_progress": "50%"
      },
      {
        "sub_layer": "452-03",
        "depth": 3,
        "name": "Sokoban Level 3",
        "puzzle_difficulty": "hard",
        "reward_progress": "75%"
      },
      {
        "sub_layer": "452-04",
        "depth": 4,
        "name": "Sokoban Prize Level",
        "puzzle_difficulty": "expert",
        "treasure": ["amulet_of_reflection_OR_bag_of_holding"],
        "reward_progress": "100%"
      }
    ]
  },

  "quest": {
    "name": "Quest Dungeon",
    "layer": 453,
    "sub_levels": "453-01 to 453-05",
    "description": "Role-specific quest to retrieve artifact",
    "role_specific": true,
    
    "levels": [
      {
        "sub_layer": "453-01",
        "depth": 1,
        "name": "Quest Home Level",
        "features": ["leader", "quest_guardians"],
        "description": "Meet quest leader, receive quest"
      },
      {
        "sub_layer": "453-05",
        "depth": 5,
        "name": "Quest Goal Level",
        "boss": {
          "name": "Nemesis (role-specific)",
          "drops": ["quest_artifact", "Bell of Opening"]
        },
        "objective": "Defeat Nemesis, retrieve artifact and Bell"
      }
    ]
  },

  "elemental_planes": {
    "name": "Elemental Planes",
    "layer": 454,
    "sub_levels": "454-01 to 454-04",
    "description": "Hostile elemental realms before ascension",
    
    "planes": [
      {
        "sub_layer": "454-01",
        "name": "Plane of Earth",
        "tile_code": "VIRTUAL-NETH-L454-01",
        "difficulty": 60,
        "features": ["solid_rock", "air_pockets"],
        "monsters": ["earth_elemental", "xorn"],
        "hazard": "Limited air, digging required",
        "portal_to": "Plane of Air"
      },
      {
        "sub_layer": "454-02",
        "name": "Plane of Air",
        "tile_code": "VIRTUAL-NETH-L454-02",
        "difficulty": 65,
        "features": ["clouds", "air_currents"],
        "monsters": ["air_elemental", "couatl"],
        "hazard": "Levitation required, no solid ground",
        "portal_to": "Plane of Fire"
      },
      {
        "sub_layer": "454-03",
        "name": "Plane of Fire",
        "tile_code": "VIRTUAL-NETH-L454-03",
        "difficulty": 70,
        "features": ["lava", "fire"],
        "monsters": ["fire_elemental", "salamander"],
        "hazard": "Extreme heat, fire resistance required",
        "portal_to": "Plane of Water"
      },
      {
        "sub_layer": "454-04",
        "name": "Plane of Water",
        "tile_code": "VIRTUAL-NETH-L454-04",
        "difficulty": 75,
        "features": ["water", "bubbles"],
        "monsters": ["water_elemental", "kraken"],
        "hazard": "Underwater, drowning risk",
        "portal_to": "Astral Plane"
      }
    ]
  },

  "astral_plane": {
    "name": "Astral Plane",
    "layer": 455,
    "tile_code": "VIRTUAL-NETH-L455",
    "difficulty": 80,
    "description": "Final level where you offer Amulet of Yendor to your god",
    
    "level": {
      "features": ["three_altars", "priests"],
      "monsters": ["Angel", "Archon", "ki-rin"],
      "bosses": ["Famine", "Pestilence", "Death"],
      "objective": "Reach your aligned altar, offer Amulet of Yendor",
      "outcome": "Ascension to demigod status (win game)"
    }
  },

  "special_features": {
    "shops": {
      "types": ["general", "armor", "weapon", "scroll", "potion", "ring", "wand", "tool", "food", "light"],
      "frequency": "~1 per 3-4 levels",
      "grid_marker": "$"
    },
    "altars": {
      "alignments": ["lawful", "neutral", "chaotic"],
      "frequency": "~1 per 5-6 levels",
      "grid_marker": "_"
    },
    "fountains": {
      "effects": ["water", "wish", "water_demon"],
      "grid_marker": "{"
    },
    "vaults": {
      "description": "Locked rooms with guards and treasure",
      "frequency": "rare",
      "grid_marker": "V"
    }
  },

  "navigation_commands": {
    "descend": "DESCEND or > (go down stairs)",
    "ascend": "ASCEND or < (go up stairs)",
    "locate": "LOCATE VIRTUAL-NETH-L[LAYER][COL][ROW]",
    "map": "MAP VIRTUAL-NETH-L401 (show current level)",
    "teleport": "TELEPORT VIRTUAL-NETH-L425BC45 (if have teleport control)"
  },

  "integration": {
    "state_file": "memory/adventures/nethack-playthrough.udos.md",
    "inventory_storage": "YAML frontmatter in .udos.md",
    "map_tiles": "ASCII dungeon maps in ```map blocks",
    "save_format": ".udos.md with state persistence",
    "multiplayer": "MeshCore P2P sync for co-op dungeon crawling"
  },

  "plugin_info": {
    "name": "NetHack",
    "version": "3.6.7",
    "source": "https://github.com/NetHack/NetHack",
    "license": "NetHack General Public License",
    "binary_size": "~10MB",
    "wizard_server_only": false,
    "offline_playable": true,
    "distribution": "QR relay for initial download, MeshCore for updates"
  },

  "metadata": {
    "created": "2026-01-04",
    "author": "uDOS Alpha v1.0.0.0",
    "references": [
      "https://nethackwiki.com/wiki/Dungeon",
      "https://nethackwiki.com/wiki/Level_difficulty",
      "https://github.com/NetHack/NetHack"
    ]
  }
}
