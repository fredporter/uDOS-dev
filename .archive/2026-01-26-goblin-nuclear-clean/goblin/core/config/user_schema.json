{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://udos.dev/schemas/user-config.json",
  "title": "uDOS User Configuration",
  "description": "User profile and system configuration for uDOS TUI and Tauri apps",
  "type": "object",
  "required": ["version", "user_profile", "location_data", "spatial_data", "system_settings"],
  "properties": {
    "version": {
      "type": "string",
      "description": "Schema version (semver)",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "default": "1.0.0"
    },
    "user_profile": {
      "type": "object",
      "required": ["username", "timezone"],
      "properties": {
        "username": {
          "type": "string",
          "description": "User's display name",
          "minLength": 1,
          "maxLength": 64,
          "default": "user"
        },
        "timezone": {
          "type": "string",
          "description": "IANA timezone (e.g., Australia/Sydney)",
          "pattern": "^[A-Za-z]+/[A-Za-z_]+$",
          "default": "UTC"
        },
        "password_hash": {
          "type": "string",
          "description": "Optional password hash (bcrypt)",
          "default": ""
        },
        "preferred_mode": {
          "type": "string",
          "enum": ["standard", "minimal", "advanced"],
          "description": "TUI display mode preference",
          "default": "standard"
        }
      }
    },
    "project": {
      "type": "object",
      "description": "Current project context (optional)",
      "properties": {
        "name": {
          "type": "string",
          "description": "Project name",
          "maxLength": 128,
          "default": ""
        },
        "description": {
          "type": "string",
          "description": "Project description",
          "maxLength": 512,
          "default": ""
        },
        "start_date": {
          "type": "string",
          "format": "date",
          "description": "Project start date (ISO 8601)",
          "default": ""
        }
      }
    },
    "location_data": {
      "type": "object",
      "description": "Geographic location for timezone/map features",
      "properties": {
        "city": {
          "type": "string",
          "description": "City name",
          "maxLength": 128,
          "default": ""
        },
        "country": {
          "type": "string",
          "description": "Country name",
          "maxLength": 128,
          "default": ""
        },
        "latitude": {
          "type": "number",
          "minimum": -90,
          "maximum": 90,
          "default": 0
        },
        "longitude": {
          "type": "number",
          "minimum": -180,
          "maximum": 180,
          "default": 0
        },
        "tile_code": {
          "type": "string",
          "description": "Map tile identifier",
          "pattern": "^[A-Z0-9]*$",
          "default": ""
        },
        "map_position": {
          "type": "object",
          "properties": {
            "x": {"type": "integer", "default": 0},
            "y": {"type": "integer", "default": 0}
          },
          "default": {"x": 0, "y": 0}
        },
        "current_layer": {
          "type": "string",
          "enum": ["surface", "underground", "sky", "space"],
          "default": "surface"
        }
      }
    },
    "spatial_data": {
      "type": "object",
      "description": "Spatial context (planet/galaxy)",
      "properties": {
        "planet": {
          "type": "string",
          "description": "Planet name",
          "maxLength": 64,
          "default": "Earth"
        },
        "planet_id": {
          "type": "string",
          "description": "Planet identifier (lowercase)",
          "pattern": "^[a-z_]+$",
          "default": "earth"
        },
        "galaxy": {
          "type": "string",
          "description": "Galaxy name",
          "maxLength": 64,
          "default": "Milky Way"
        },
        "galaxy_id": {
          "type": "string",
          "description": "Galaxy identifier (lowercase)",
          "pattern": "^[a-z_]+$",
          "default": "milky_way"
        }
      }
    },
    "session_data": {
      "type": "object",
      "description": "Current session tracking (runtime only)",
      "properties": {
        "current_session": {
          "type": "string",
          "description": "Current session ID",
          "pattern": "^session_\\d+$",
          "default": ""
        },
        "session_count": {
          "type": "integer",
          "minimum": 0,
          "default": 0
        },
        "last_login": {
          "type": "string",
          "format": "date-time",
          "description": "Last login timestamp (ISO 8601)",
          "default": ""
        },
        "viewport": {
          "type": "object",
          "description": "Last detected viewport settings",
          "properties": {
            "width": {"type": "integer", "minimum": 1, "default": 80},
            "height": {"type": "integer", "minimum": 1, "default": 24},
            "device_tier": {"type": "string", "default": ""},
            "mode": {"type": "string", "default": ""}
          },
          "default": {}
        }
      }
    },
    "system_settings": {
      "type": "object",
      "description": "System preferences",
      "properties": {
        "interface": {
          "type": "object",
          "properties": {
            "theme": {
              "type": "string",
              "enum": ["dungeon", "galaxy", "foundation", "science", "project"],
              "description": "UI theme",
              "default": "dungeon"
            },
            "show_hints": {
              "type": "boolean",
              "description": "Show command hints",
              "default": true
            },
            "animation_speed": {
              "type": "string",
              "enum": ["slow", "normal", "fast", "instant"],
              "default": "normal"
            }
          },
          "default": {"theme": "dungeon", "show_hints": true, "animation_speed": "normal"}
        },
        "workspace_preference": {
          "type": "string",
          "enum": ["memory", "knowledge", "missions"],
          "description": "Default workspace directory",
          "default": "memory"
        },
        "auto_save": {
          "type": "boolean",
          "description": "Auto-save file edits",
          "default": true
        },
        "backup_on_edit": {
          "type": "boolean",
          "description": "Create .backup on file edits",
          "default": false
        }
      }
    }
  }
}
